<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sun</title>
  <link rel="stylesheet" href="css/style-domain.css">
</head>
<body>
  <!-- gọi chạy pháo hoa -->
  <canvas id="canvas"></canvas>

  <!-- Hai dòng domain, sẽ được gán text bằng JS -->
  <h1 class="autofit" id="domain1"></h1>
  <h1 class="autofit" id="domain2"></h1>

  <!-- Script đọc config.json và set domain + firework -->
    <script>
    const CONFIG_URL = "config.json";

    async function applyConfig() {
      try {
        // Thêm query ?t=... để chống cache CDN/OBS
        const res = await fetch(CONFIG_URL + "?t=" + Date.now(), { cache: "no-cache" });
        if (!res.ok) throw new Error("Không load được config.json");
        const cfg = await res.json();

        // Set title (nếu có)
        if (cfg.title) {
          document.title = cfg.title;
        }

        // Set domain text
        const domains = cfg.domains || [];
        const d1 = document.getElementById("domain1");
        const d2 = document.getElementById("domain2");

        d1.textContent = domains[0] || "";
        d2.textContent = domains[1] || "";

        // Set bật/tắt pháo hoa
        window.ENABLE_FIREWORK = cfg.enableFirework === true;

      } catch (e) {
        console.error(e);

        // Fallback nếu lỗi: vẫn có text và tắt pháo hoa
        document.getElementById("domain1").textContent = "SUN.WIN";
        document.getElementById("domain2").textContent = "GEM.WIN";
        window.ENABLE_FIREWORK = false;
      }
    }

    // Gọi ngay lần đầu
    applyConfig();

    // Sau đó mỗi 10 giây đọc lại config.json một lần
    // (có thể đổi 10000 thành 60000 nếu bạn chỉ cần 1 phút cập nhật 1 lần)
    setInterval(applyConfig, 10000);
  </script>

  <script>
const domain1 = document.getElementById("domain1");
const domain2 = document.getElementById("domain2");

// Tọa độ + vận tốc riêng cho từng chữ
let x1, y1, dx1, dy1;
let x2, y2, dx2, dy2;

function random(min, max) {
    return Math.random() * (max - min) + min;
}

function initPositions() {
    const W = window.innerWidth;
    const H = window.innerHeight;

    const w1 = domain1.offsetWidth;
    const h1 = domain1.offsetHeight;
    const w2 = domain2.offsetWidth;
    const h2 = domain2.offsetHeight;

    x1 = random(0, Math.max(1, W - w1));
    y1 = random(0, Math.max(1, H - h1));
    x2 = random(0, Math.max(1, W - w2));
    y2 = random(0, Math.max(1, H - h2));

    dx1 = random(2, 5) * (Math.random() < 0.5 ? 1 : -1);
    dy1 = random(2, 5) * (Math.random() < 0.5 ? 1 : -1);

    dx2 = random(2, 5) * (Math.random() < 0.5 ? 1 : -1);
    dy2 = random(2, 5) * (Math.random() < 0.5 ? 1 : -1);
}

function animate1() {
    const W = window.innerWidth;
    const H = window.innerHeight;
    const w = domain1.offsetWidth;
    const h = domain1.offsetHeight;

    x1 += dx1;
    y1 += dy1;

    if (x1 <= 0 || x1 + w >= W) dx1 = -dx1;
    if (y1 <= 0 || y1 + h >= H) dy1 = -dy1;

    domain1.style.left = x1 + "px";
    domain1.style.top  = y1 + "px";

    requestAnimationFrame(animate1);
}

function animate2() {
    const W = window.innerWidth;
    const H = window.innerHeight;
    const w = domain2.offsetWidth;
    const h = domain2.offsetHeight;

    x2 += dx2;
    y2 += dy2;

    if (x2 <= 0 || x2 + w >= W) dx2 = -dx2;
    if (y2 <= 0 || y2 + h >= H) dy2 = -dy2;

    domain2.style.left = x2 + "px";
    domain2.style.top  = y2 + "px";

    requestAnimationFrame(animate2);
}

async function startAll() 

    initPositions();
    animate1();
    animate2();

}

window.onload = startAll;


  <!-- Chạy script Double Fullscreen -->
  <script src="js/fullscreen.js"></script> 
  
  <!-- Chạy script Pháo hoa (sử dụng window.ENABLE_FIREWORK đã set ở trên) -->
  <script src="js/firework.js"></script>

  <!-- Tự động co chữ theo độ dài -->
  <script src="js/autofit.js" defer></script>
</body>
</html>
